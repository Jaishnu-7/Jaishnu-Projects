<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Travel Insurance - Quote & Purchase</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f7fafc; --card:#ffffff; --accent:#2563eb; --muted:#6b7280; --radius:12px;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2ff);color:#111827}
    .container{max-width:980px;margin:32px auto;padding:20px}
    header{display:flex;align-items:center;gap:16px}
    .brand{display:flex;flex-direction:column}
    h1{margin:0;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:14px}

    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:20px}
    .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:0 4px 18px rgba(16,24,40,0.06)}
    form .row{display:flex;gap:12px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text], input[type=email], input[type=number], input[type=date], select{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px}
    .small{font-size:13px;color:var(--muted)}
    .field{margin-bottom:12px}
    .inline{display:flex;gap:12px}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.secondary{background:transparent;border:1px solid #e5e7eb;color:var(--muted)}
    .summary{display:flex;flex-direction:column;gap:10px}
    .summary .line{display:flex;justify-content:space-between}
    .total{font-size:18px;font-weight:700}
    .muted{color:var(--muted)}

    @media (max-width:900px){
      .grid{grid-template-columns:1fr;}
      .card{padding:14px}
    }

    /* accessibility focus */
    input:focus, select:focus, button:focus{outline:3px solid rgba(37,99,235,0.15)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="width:56px;height:56px;background:linear-gradient(135deg,#7dd3fc,#4f46e5);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px">TI</div>
      <div class="brand">
        <h1>Travel Insurance — Quick Quote</h1>
        <p class="lead">Get a fast, transparent quote for single-trip travel insurance. Includes GST calculation.</p>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Form -->
      <section class="card" aria-labelledby="formHeading">
        <h2 id="formHeading" style="margin:0 0 12px;font-size:16px">Traveler & Trip Details</h2>
        <form id="quoteForm" onsubmit="return false;" autocomplete="on">
          <div class="row">
            <div style="flex:1">
              <div class="field">
                <label for="fullName">Full name</label>
                <input id="fullName" name="fullName" type="text" placeholder="e.g. Rahul Sharma" required>
              </div>
              <div class="field">
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="you@example.com" required>
              </div>
            </div>
            <div style="width:160px">
              <div class="field">
                <label for="age">Age</label>
                <input id="age" name="age" type="number" min="0" max="120" value="30" required>
              </div>
              <div class="field">
                <label for="travellers">Travellers</label>
                <select id="travellers" name="travellers">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="destination">Destination country</label>
            <input id="destination" name="destination" type="text" placeholder="e.g. United Arab Emirates" required>
            <p class="small">Tip: Type country name. For multi-country trips, write main destination.</p>
          </div>

          <div class="row">
            <div style="flex:1">
              <div class="field">
                <label for="startDate">Travel start</label>
                <input id="startDate" name="startDate" type="date" required>
              </div>
            </div>
            <div style="width:160px">
              <div class="field">
                <label for="endDate">Travel end</label>
                <input id="endDate" name="endDate" type="date" required>
              </div>
            </div>
          </div>

          <div class="field">
            <label for="coverage">Coverage plan</label>
            <select id="coverage" name="coverage">
              <option value="basic">Basic — Medical cover up to ₹2,00,000</option>
              <option value="standard">Standard — Medical + Baggage up to ₹5,00,000</option>
              <option value="premium">Premium — Higher limits + Cancellation cover</option>
            </select>
          </div>

          <div class="field">
            <label>Optional add-ons</label>
            <div class="inline">
              <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="adventure" /> Adventure sports rider</label>
              <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="golf" /> Golf equipment cover</label>
            </div>
          </div>

          <div style="display:flex;gap:10px;margin-top:10px">
            <button class="btn" id="getQuote">Get quote</button>
            <button class="btn secondary" id="resetBtn" type="button">Reset</button>
          </div>
        </form>

        <hr style="margin:18px 0;border:none;border-top:1px solid #f1f5f9">
        <p class="small">This is a demo quote calculator. For a real purchase integration, connect to your insurer's API and payment gateway.</p>
      </section>

      <!-- RIGHT: Quote Summary -->
      <aside class="card" aria-labelledby="summaryHeading">
        <h3 id="summaryHeading" style="margin:0 0 12px;font-size:16px">Quote summary</h3>
        <div class="summary" id="summary">
          <div class="line"><span class="muted">Plan</span><span id="sPlan">—</span></div>
          <div class="line"><span class="muted">Trip duration</span><span id="sDuration">—</span></div>
          <div class="line"><span class="muted">Travellers</span><span id="sTrav">—</span></div>

          <div style="height:1px;background:#f1f5f9;margin:6px 0;border-radius:6px"></div>

          <div class="line"><span class="muted">Base premium</span><span id="sBase">₹0</span></div>
          <div class="line"><span class="muted">Add-ons</span><span id="sAddons">₹0</span></div>
          <div class="line"><span class="muted">GST (18%)</span><span id="sGst">₹0</span></div>

          <div class="line total"><span>Total payable</span><span id="sTotal">₹0</span></div>

          <div style="display:flex;gap:8px;margin-top:12px">
            <button class="btn" id="buyNow">Buy now</button>
            <button class="btn secondary" id="downloadPdf">Download</button>
          </div>

          <div id="note" class="small muted" style="margin-top:10px">No personal data is submitted in this demo.</div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // Simple pricing rules (demo only). Values in INR per traveller per day approximated.
    const PRICING = {
      basic: 50,
      standard: 90,
      premium: 160,
      adventureAddonPerDay: 30,
      golfAddonFlat: 150
    };
    const GST_RATE = 0.18;

    function daysBetween(start, end) {
      const s = new Date(start);
      const e = new Date(end);
      // add 1 day inclusive
      const diff = Math.ceil((e - s) / (1000*60*60*24)) + 1 - 1; // ensures integer days
      return Math.max(diff, 1);
    }

    function formatINR(x){
      return '₹' + Number(x).toLocaleString('en-IN', {maximumFractionDigits:0});
    }

    function calculateQuote(){
      const form = document.getElementById('quoteForm');
      const plan = document.getElementById('coverage').value;
      const travellers = Number(document.getElementById('travellers').value || 1);
      const start = document.getElementById('startDate').value;
      const end = document.getElementById('endDate').value;
      const age = Number(document.getElementById('age').value || 30);
      const adventure = document.getElementById('adventure').checked;
      const golf = document.getElementById('golf').checked;

      // Validation
      if(!start || !end){ alert('Please provide travel start and end dates.'); return null; }
      const dur = daysBetween(start,end);

      // base premium calculation
      const perDay = PRICING[plan];
      let base = perDay * dur * travellers;

      // age loading (simple rule): +25% if age > 60, +10% if age 46-60
      if(age > 60) base *= 1.25;
      else if(age > 45) base *= 1.10;

      // addons
      let addons = 0;
      if(adventure) addons += PRICING.adventureAddonPerDay * dur * travellers;
      if(golf) addons += PRICING.golfAddonFlat * travellers;

      // small discount for longer trips >30 days
      if(dur > 30) base *= 0.95;

      const subtotal = Math.round(base + addons);
      const gst = Math.round(subtotal * GST_RATE);
      const total = subtotal + gst;

      return { plan, dur, travellers, base: Math.round(base), addons: Math.round(addons), gst, total };
    }

    function updateSummary(q){
      if(!q) return;
      document.getElementById('sPlan').textContent = q.plan;
      document.getElementById('sDuration').textContent = q.dur + ' day' + (q.dur>1?'s':'');
      document.getElementById('sTrav').textContent = q.travellers;
      document.getElementById('sBase').textContent = formatINR(q.base);
      document.getElementById('sAddons').textContent = formatINR(q.addons);
      document.getElementById('sGst').textContent = formatINR(q.gst);
      document.getElementById('sTotal').textContent = formatINR(q.total);
    }

    document.getElementById('getQuote').addEventListener('click', function(e){
      e.preventDefault();
      const q = calculateQuote();
      if(q) updateSummary(q);
    });

    document.getElementById('resetBtn').addEventListener('click', function(){
      document.getElementById('quoteForm').reset();
      document.getElementById('sPlan').textContent='—';
      document.getElementById('sDuration').textContent='—';
      document.getElementById('sTrav').textContent='—';
      document.getElementById('sBase').textContent='₹0';
      document.getElementById('sAddons').textContent='₹0';
      document.getElementById('sGst').textContent='₹0';
      document.getElementById('sTotal').textContent='₹0';
    });

    // Simple download of quote as text file for demo
    document.getElementById('downloadPdf').addEventListener('click', function(){
      const q = calculateQuote();
      if(!q) return;
      const name = document.getElementById('fullName').value || 'Customer';
      const txt = `Travel Insurance Quote\nName: ${name}\nPlan: ${q.plan}\nDuration: ${q.dur} day(s)\nTravellers: ${q.travellers}\nBase: ${q.base}\nAddons: ${q.addons}\nGST: ${q.gst}\nTotal: ${q.total}`;
      const blob = new Blob([txt], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'travel-insurance-quote.txt';
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // Mock buy now action (demo)
    document.getElementById('buyNow').addEventListener('click', function(){
      const q = calculateQuote();
      if(!q) return;
      alert('Demo: Redirecting to secure payment gateway (not implemented). Total payable: ' + formatINR(q.total));
    });

    // small helper: set default dates (today + 7 days)
    (function setDefaultDates(){
      const today = new Date();
      const next = new Date(); next.setDate(today.getDate()+7);
      const toISO = d => d.toISOString().slice(0,10);
      document.getElementById('startDate').value = toISO(today);
      document.getElementById('endDate').value = toISO(next);
    })();
  </script>
</body>
</html>
